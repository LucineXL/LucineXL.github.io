
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lucine-XL</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="LucineXL,"> 
    <meta name="description" content="我是一个小码农~,"> 
    <meta name="author" content="Lucine"> 
    <link rel="alternative" href="atom.xml" title="Lucine-XL" type="application/atom+xml"> 
    <link rel="icon" href="/img/li.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
    <script>
    //   (adsbygoogle = window.adsbygoogle || []).push({
    //     google_ad_client: "ca-pub-8691406134231910",
    //     enable_page_level_ads: true
    //   });
    </script>

</head>
</html>
<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">移动端适配那点事</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">移动端适配那点事</h1>
        <div class="stuff">
            <span>三月 28, 2020</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/移动端适配/">移动端适配</a></li></ul>


        </div>
        <div class="content markdown">
            <p>随着手机的普及， 现在手机的型号和尺寸越来越多， 也就衍生出了很多种的移动端的适配方案。</p>
<p>首先，我们先来了解几个基本的概念</p>
<h3 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h3><h4 id="英寸"><a href="#英寸" class="headerlink" title="英寸"></a>英寸</h4><p>一般英寸用来表示屏幕的大小。 比如在液晶显示器中，规格一般有17寸、19寸、22寸等; 在手机中，屏幕尺寸一般有5.0寸、5.5寸、6.44寸等。在平板电脑中，屏幕尺寸一般有7.9寸、9.7寸、12.9寸。</p>
<p>显示屏的大小通常以对角线的长度来衡量，以英寸单位。</p>
<h4 id="屏幕分辨率"><a href="#屏幕分辨率" class="headerlink" title="屏幕分辨率"></a>屏幕分辨率</h4><p>屏幕分辨率指一个屏幕具体由多少个像素点组成。</p>
<h4 id="图像分辨率"><a href="#图像分辨率" class="headerlink" title="图像分辨率"></a>图像分辨率</h4><p>我们通常说的图片分辨率其实是指图片含有的像素数，比如一张图片的分辨率为800 x 400。这表示图片分别在垂直和水平上所具有的像素点数为800和400。</p>
<p>同一尺寸的图片，分辨率越高，图片越清晰。</p>
<p>比如我们在开发过程中， 会用到二倍图， 三倍图，这里说的就是图像分辨率</p>
<h4 id="设备像素"><a href="#设备像素" class="headerlink" title="设备像素"></a>设备像素</h4><p>设备像素即物理像素， 是显示器中最小的显示单元，每个像素可以根据操作系统设置自己的颜色和亮度。 对于一个设备来说， 从他出厂的那一刻， 他的设备像素就是固定的， 不会发生改变的</p>
<h4 id="设备独立像素"><a href="#设备独立像素" class="headerlink" title="设备独立像素"></a>设备独立像素</h4><p>设备独立像素也叫<code>密度无关像素</code>，可以理解成是计算机坐标系统中的一个点，这个点表示一个可以由程序使用并控制的虚拟像素，可以由相关系统转换为物理像素。</p>
<p>在几年之前， 我们用的手机分辨率还比较低， 可是随着科技的发展， 手机的分辨率越来越高。  举个例子， 比如一个旧手机的分辨率是 <code>320*480</code>， 更新后新手机分辨率提高到了<code>640*960</code>。 如果按照物理像素作为单位， 同样的一张图片， 在分辨率为 <code>640*960</code> 的手机上， 只能占据屏幕的一半， 因为他的分辨率提高了一半， 但是事实不是这样的。</p>
<p>我们现在使用的智能手机， 不管分辨率多高， 展示出来的界面比例都是相似的。 乔布斯在iPhone4的发布会上首次提出了Retina Display(视网膜屏幕)的概念，它解决了上面的问题。在iPhone4使用的视网膜屏幕中，把2x2个像素当1个像素使用，这样让屏幕看起来更精致，但是元素的大小却不会改变。</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/17/16ac3a65a53a177e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt></p>
<p>对于上面的图片来说， 左边的手机用320<em>480个像素去渲染， 但是右边的手机用了640</em>960个像素去渲染， 所以右边的屏幕就比左边的精致的多。</p>
<p>所以，我们必须用一种单位来同时告诉不同分辨率的手机，它们在界面上显示元素的大小是多少，这个单位就是设备独立像素(Device Independent Pixels)简称DIP或DP。</p>
<h4 id="设备像素比"><a href="#设备像素比" class="headerlink" title="设备像素比"></a>设备像素比</h4><p>设备像素比<code>device pixel ratio</code>简称<code>dpr</code>，即物理像素和设备独立像素的比值。</p>
<p>在js中，浏览器为我们提供了 <code>window.devicePixelRatio</code> 来获取<code>dpr</code></p>
<p>在css中，可以使用媒体查询 <code>min-device-pixel-ratio</code>，区分 <code>dpr</code>：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">-webkit-min-device-pixel-ratio:</span> <span class="number">2</span>),(<span class="attribute">min-device-pixel-ratio:</span> <span class="number">2</span>)&#123; &#125;</span><br></pre></td></tr></table></figure></p>
<p>在React Native中，我们也可以使用PixelRatio.get()来获取DPR。</p>
<h3 id="二-视口-viewport"><a href="#二-视口-viewport" class="headerlink" title="二. 视口 viewport"></a>二. 视口 viewport</h3><p>视口（viewport）就是浏览器中用于显示网页的区域。</p>
<p>在PC中， 视口实际上指的是浏览器的可视区域，其宽度和浏览器窗口的宽度保持一致</p>
<p>在移动端， 浏览器通常宽度为240px~640px，而大多数PC端设计的网站宽度至少为800px，如果仍以浏览器窗口作为视口的话，网站内容在手机上看起来会非常窄。<br>所以在移动端，引入了<code>布局视口</code>（Layout Viewport）、<code>视觉视口</code>（Visual Viewport）和<code>理想视口</code>（Ideal Viewport）三个概念。</p>
<h4 id="布局视口-Layout-Viewport"><a href="#布局视口-Layout-Viewport" class="headerlink" title="布局视口 Layout Viewport"></a>布局视口 Layout Viewport</h4><p>一般移动设备的浏览器都默认设置了一个 viewport 元标签，定义一个布局视口（layout viewport），用于解决早期的页面在手机上显示的问题。<br>布局视口是网页布局的基准窗口， 在PC浏览器上， 布局视口就等于当前浏览器的窗口大小， 在移动端，基本都将这个视口分辨率设置为980px，所以 PC 上的网页基本能在手机上呈现，只不过元素看上去很小，一般默认可以通过手动缩放网页。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8066565-d3d732fd43565e33.png?imageMogr2/auto-orient/strip|imageView2/2/w/336/format/webp" alt></p>
<p>获取当前页面的布局视口大小：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span> <span class="comment">// 布局视口宽度</span></span><br><span class="line">document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span> <span class="comment">// 布局视口高度</span></span><br></pre></td></tr></table></figure>
<p>可以通过meta标签改变布局视口的大小</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="attribute">name</span>=<span class="string">"viewport"</span> <span class="attribute">content</span>=<span class="string">"width=750"</span>&gt;</span><br></pre></td></tr></table></figure>
<h4 id="视觉视口"><a href="#视觉视口" class="headerlink" title="视觉视口"></a>视觉视口</h4><p>视觉窗口是用户可以看到的部分，默认等于当前浏览器的窗口大小。  当用户对页面进行缩放时， 不会影响布局视口的大小， 但是会改变视觉窗口的大小。 当用户放大时， 视觉窗口会变小， css像素会跨越更多的物理像素</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8066565-8df20ab7b8bfeb16.png?imageMogr2/auto-orient/strip|imageView2/2/w/323/format/webp" alt></p>
<p>获取当前页面的视觉视口大小：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.innerWidth <span class="comment">//视口的宽度</span></span><br><span class="line"><span class="built_in">window</span>.innerHeight <span class="comment">//视口的高度</span></span><br></pre></td></tr></table></figure>
<h4 id="理想视口"><a href="#理想视口" class="headerlink" title="理想视口"></a>理想视口</h4><p>我们在移动端上展示时，布局视口在移动端展示的效果并不是我们我们想要的理想的效果，所以理想视口(ideal viewport)就诞生了：网站页面在移动端展示的理想大小。</p>
<p>理想视口的值其实就是屏幕分辨率的值，跟设备的硬件像素无关的。如果用户没有进行缩放，那么一个 CSS 像素就等于一个 dip。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">screen.<span class="built_in">width</span> <span class="comment">//设备独立像素宽度</span></span><br><span class="line">screen.<span class="built_in">height</span> <span class="comment">//设备独立像素高度</span></span><br></pre></td></tr></table></figure>
<p>用下面的方法可以使布局视口与理想视口的宽度一致：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="attribute">name</span>=<span class="string">"viewport"</span> <span class="attribute">content</span>=<span class="string">"width=device-width"</span>&gt;</span><br></pre></td></tr></table></figure>
<h4 id="meta-viewport"><a href="#meta-viewport" class="headerlink" title="meta viewport"></a>meta viewport</h4><p>meta标签中的viewport可以设置移动端的视口， 缩放等相关属性</p>
<p><code>meta</code> 元素可提供有关页面的元信息（meta-information），比如针对搜索引擎和更新频度的描述和关键词。</p>
<p><code>meta</code> 标签位于文档的头部，不包含任何内容。<code>meta</code> 标签的属性定义了与文档相关联的名称/值对。</p>
<p>meta标签的用法：</p>
<table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">值</th>
<th style="text-align:center">是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">content</td>
<td style="text-align:center">some_text</td>
<td style="text-align:center">是</td>
<td>定义与 http-equiv 或 name 属性相关的元信息</td>
</tr>
<tr>
<td style="text-align:center">name</td>
<td style="text-align:center">author<br>description<br>keywords<br>generator<br>revised<br>others</td>
<td style="text-align:center">否</td>
<td>把 content 属性关联到一个名称</td>
</tr>
<tr>
<td style="text-align:center">http-equiv</td>
<td style="text-align:center">content-type<br>expires<br>refresh<br>set-cookie</td>
<td style="text-align:center">否</td>
<td>把 content 属性关联到 HTTP 头部。</td>
</tr>
<tr>
<td style="text-align:center">scheme</td>
<td style="text-align:center">some_text</td>
<td style="text-align:center">否</td>
<td>定义用于翻译 content 属性值的格式。</td>
</tr>
</tbody>
</table>
<p><code>viewport</code>的使用：</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="attr">name="viewport"</span> <span class="attr">content="width=device-width;</span> <span class="attr">initial-scale=1;</span> <span class="attr">maximum-scale=1;</span> <span class="attr">minimum-scale=1;</span> <span class="attr">user-scalable=no;"&gt;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">width</td>
<td style="text-align:center">定义布局视口的宽度， 为一个正整数或字符串”device-width”</td>
</tr>
<tr>
<td style="text-align:center">height</td>
<td style="text-align:center">定义布局视口的高度， 为一个正整数或字符串”device-height”</td>
</tr>
<tr>
<td style="text-align:center">initial-scale</td>
<td style="text-align:center">页面的初始缩放值，为一个数字，可以带小数  0.0 - 10.0</td>
</tr>
<tr>
<td style="text-align:center">minimum-scale</td>
<td style="text-align:center">用户的最小缩放值，为一个数字，可以带小数 0.0 - 10.0</td>
</tr>
<tr>
<td style="text-align:center">maximum-scale</td>
<td style="text-align:center">允许用户的最大缩放值，为一个数字，可以带小数  0.0 - 10.0</td>
</tr>
<tr>
<td style="text-align:center">user-scalable</td>
<td style="text-align:center">否允许用户进行缩放，值为”no”或”yes”, no 代表不允许，yes代表允许</td>
</tr>
</tbody>
</table>
<h4 id="三-适配方案"><a href="#三-适配方案" class="headerlink" title="三. 适配方案"></a>三. 适配方案</h4><h4 id="flexible方案"><a href="#flexible方案" class="headerlink" title="flexible方案"></a>flexible方案</h4><p>flexible方案是阿里早期开源的一个移动端适配解决方案，引用flexible后，我们在页面上统一使用rem来布局。</p>
<p>实现方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// <span class="keyword">set</span> <span class="number">1</span><span class="keyword">rem</span> = viewWidth / <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">rem</span> = docEl.clientWidth / <span class="number">10</span></span><br><span class="line">docEl.style.fontSize = <span class="keyword">rem</span> + <span class="string">'px'</span></span><br></pre></td></tr></table></figure>
<p>rem 是相对于html节点的font-size来做计算的。  我们可以通过设置document.documentElement.style.fontSize就可以统一整个页面的布局标准。<br>上面的代码中，将html节点的font-size设置为页面clientWidth(布局视口)的1/10，即1rem就等于页面布局视口的1/10，这就意味着我们后面使用的rem都是按照页面比例来计算的。<br>这时，我们只需要将UI出的图转换为rem即可。</p>
<h4 id="vh、vw方案"><a href="#vh、vw方案" class="headerlink" title="vh、vw方案"></a>vh、vw方案</h4><p>vh、vw方案即将视觉视口宽度 window.innerWidth和视觉视口高度 window.innerHeight 等分为 100 份。<br>上面的flexible方案就是模仿这种方案，因为早些时候vw还没有得到很好的兼容。</p>
<p>vw(Viewport’s width)：1vw等于视觉视口的1%<br>vh(Viewport’s height) :1vh 为视觉视口高度的1%<br>vmin :  vw 和 vh 中的较小值<br>vmax : 选取 vw 和 vh 中的较大值</p>
<blockquote>
<p>参考文献：<br><a href="https://juejin.im/post/5cddf289f265da038f77696c" target="_blank" rel="noopener">关于移动端适配，你必须要知道的</a><br><a href="https://www.jianshu.com/p/b6ca276d7e3c" target="_blank" rel="noopener">移动web之视口</a></p>
</blockquote>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title='0' data-url='http://link.hhtjim.com/163/5146554.mp3'></li>
                    
                        <li title='1' data-url='http://link.hhtjim.com/qq/001faIUs4M2zna.mp3'></li>
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci='875d3015f05abfc0a79b'
        data-cs='3192ac1526e44e82c6ff33702190a4123689a827'
        data-r='LucineXL.github.io'
        data-o='LucineXL'
        data-a='LucineXL'
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>


<!-- 
 -->
</html>